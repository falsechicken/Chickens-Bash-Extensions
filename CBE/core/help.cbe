#!/bin/bash

function @help()
{
    IFS='.' read -a args <<< "$1"
    
    CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH="$CBE_CORE_SYSTEM_MODULES_PATH"/"${args[0]}"/help/"${args[0]}"
    CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE=""
    
    CBE_CORE_HELP_GLOBAL_MODULE_HELP_PATH="$CBE_CORE_GLOBAL_MODULES_PATH"/"${args[0]}"/help/"${args[0]}"
    CBE_CORE_HELP_GLOBAL_MODULE_HELP_NAMESPACE=""
    
    CBE_CORE_HELP_USER_MODULE_HELP_PATH="$CBE_CORE_USER_MODULES_PATH"/"${args[0]}"/help/"${args[0]}"
    CBE_CORE_HELP_USER_MODULE_HELP_NAMESPACE=""
    
    for arg in "${args[@]}"
	do
		CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE="$CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE""$arg".
		
		if [ "$arg" != "${args[0]}" ]; then
			CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH="$CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH"."$arg"
		fi
		
	done
	
	CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE="${CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE%?}" ## Trim trailing .
	
	CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH="$CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH".readme.txt
    
    if [ -e "$CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH" ]; then
		less "$CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH"
	else
		echo "No manual for module "$CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE" found!"
	fi
	
	unset CBE_CORE_HELP_SYSTEM_MODULE_HELP_NAMESPACE
	unset CBE_CORE_HELP_SYSTEM_MODULE_HELP_PATH
}
